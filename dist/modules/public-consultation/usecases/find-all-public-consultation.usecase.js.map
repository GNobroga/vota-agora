{"version":3,"sources":["../../../../src/modules/public-consultation/usecases/find-all-public-consultation.usecase.ts"],"sourcesContent":["import { Inject, Injectable } from \"@nestjs/common\";\r\nimport Paginator from \"src/core/models/Paginator\";\r\nimport IDefaultUseCase from \"src/core/usecases/default.usecase\";\r\nimport { User } from \"src/modules/users/user.schema\";\r\nimport PublicConsultationResponseDTO from \"../dtos/response/public-consultation-response.dto\";\r\nimport { IPublicConsultationRepository, PUBLIC_CONSULTATION_REPOSITORY_TOKEN } from \"../interfaces/public-consultation-repository.interface\";\r\n\r\n@Injectable()\r\nexport default class FindAllPublicConsultationUseCase implements IDefaultUseCase<Paginator, PublicConsultationResponseDTO[]> {\r\n\r\n    constructor(\r\n        @Inject(PUBLIC_CONSULTATION_REPOSITORY_TOKEN)\r\n        private readonly _publicConsultationRepository: IPublicConsultationRepository,\r\n    ) {}\r\n\r\n    async execute(input: Paginator): Promise<PublicConsultationResponseDTO[]> {\r\n        return (await this._publicConsultationRepository.findAll(input)).map(src => {\r\n            const owner = src.owner as User;\r\n            return {\r\n                id: src['_id'],\r\n                title: src.title,\r\n                description: src.description,\r\n                initialDate: src.initialDate,\r\n                endDate: src.endDate,\r\n                imageUrl: src.imageUrl,\r\n                owner: {\r\n                    id: owner['_id'],\r\n                    fullName: owner.fullName,\r\n                    document: owner.document,\r\n                },\r\n            }\r\n        });\r\n    }\r\n}"],"names":["FindAllPublicConsultationUseCase","execute","input","_publicConsultationRepository","findAll","map","src","owner","id","title","description","initialDate","endDate","imageUrl","fullName","document","constructor"],"mappings":";;;;;;;eAQqBA;;;wBARc;uDAKiD;;;;;;;;;;;;;;;AAGrE,IAAA,AAAMA,mCAAN,MAAMA;IAOjB,MAAMC,QAAQC,KAAgB,EAA4C;QACtE,OAAO,AAAC,CAAA,MAAM,IAAI,CAACC,6BAA6B,CAACC,OAAO,CAACF,MAAK,EAAGG,GAAG,CAACC,CAAAA;YACjE,MAAMC,QAAQD,IAAIC,KAAK;YACvB,OAAO;gBACHC,IAAIF,GAAG,CAAC,MAAM;gBACdG,OAAOH,IAAIG,KAAK;gBAChBC,aAAaJ,IAAII,WAAW;gBAC5BC,aAAaL,IAAIK,WAAW;gBAC5BC,SAASN,IAAIM,OAAO;gBACpBC,UAAUP,IAAIO,QAAQ;gBACtBN,OAAO;oBACHC,IAAID,KAAK,CAAC,MAAM;oBAChBO,UAAUP,MAAMO,QAAQ;oBACxBC,UAAUR,MAAMQ,QAAQ;gBAC5B;YACJ;QACJ;IACJ;IAtBAC,YACI,AACiBb,6BAA4D,CAC/E;aADmBA,gCAAAA;IAClB;AAoBP"}