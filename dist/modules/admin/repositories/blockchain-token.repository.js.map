{"version":3,"sources":["../../../../src/modules/admin/repositories/blockchain-token.repository.ts"],"sourcesContent":["import { Injectable } from \"@nestjs/common\";\r\nimport { InjectModel } from \"@nestjs/mongoose\";\r\nimport { Model } from \"mongoose\";\r\nimport { BlockchainToken } from \"../schemas/blockchain-token.schema\";\r\n\r\nexport const BLOCKCHAIN_REPOSITORY_TOKEN = 'IBlockchainTokenRepository';\r\n\r\nexport interface IBlockchainTokenRepository {\r\n    findFirst(): Promise<BlockchainToken | null>;\r\n    deleteAll(): Promise<boolean>;\r\n    create(record: BlockchainToken): Promise<BlockchainToken>;\r\n}\r\n\r\n@Injectable()\r\nexport default class BlockchainTokenRepository implements IBlockchainTokenRepository {\r\n    \r\n    constructor(\r\n        @InjectModel(BlockchainToken.name)\r\n        private readonly _tokenModel: Model<BlockchainToken>) {}\r\n\r\n\r\n    async create(record: BlockchainToken): Promise<BlockchainToken> {\r\n        return await (await this._tokenModel.create(record)).save();\r\n    }\r\n\r\n    async deleteAll(): Promise<boolean> {\r\n        await this._tokenModel.deleteMany();\r\n        return true;\r\n    }\r\n    \r\n    async findFirst(): Promise<BlockchainToken | null> {\r\n       try {\r\n            const tokenAddress = (await this._tokenModel.findOne()).toObject();\r\n            return tokenAddress;\r\n       } catch (error) {\r\n            return null;\r\n       }\r\n    }\r\n\r\n}"],"names":["BLOCKCHAIN_REPOSITORY_TOKEN","BlockchainTokenRepository","create","record","_tokenModel","save","deleteAll","deleteMany","findFirst","tokenAddress","findOne","toObject","error","constructor","name"],"mappings":";;;;;;;;;;;IAKaA,2BAA2B;eAA3BA;;;eASQC;;;wBAdM;0BACC;2BACN;uCACU;;;;;;;;;;;;;;;AAEzB,MAAMD,8BAA8B;AAS5B,IAAA,AAAMC,4BAAN,MAAMA;IAOjB,MAAMC,OAAOC,MAAuB,EAA4B;QAC5D,OAAO,MAAM,AAAC,CAAA,MAAM,IAAI,CAACC,WAAW,CAACF,MAAM,CAACC,OAAM,EAAGE,IAAI;IAC7D;IAEA,MAAMC,YAA8B;QAChC,MAAM,IAAI,CAACF,WAAW,CAACG,UAAU;QACjC,OAAO;IACX;IAEA,MAAMC,YAA6C;QAChD,IAAI;YACC,MAAMC,eAAe,AAAC,CAAA,MAAM,IAAI,CAACL,WAAW,CAACM,OAAO,EAAC,EAAGC,QAAQ;YAChE,OAAOF;QACZ,EAAE,OAAOG,OAAO;YACX,OAAO;QACZ;IACH;IArBAC,YACI,AACiBT,WAAmC,CAAE;aAArCA,cAAAA;IAAsC;AAqB/D;;;mFAtBqCU"}